<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PolitiFi Solana</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="https://solanatokens.github.io/politifisolana/croq.ico" type="image/x-icon">
</head>
<body>
    <div class="container">
        <header>
            <div class="title">
                <h1>PolitiFi Solana</h1>
            </div>
            <div class="brought-to-you">
                <p>Brought to You by</p>
                <div class="profile">
                    <p><strong>Cryptoq</strong> <img src="https://pbs.twimg.com/profile_images/1781464826935451648/ASO_mzgr_400x400.jpg" alt="Cryptoq Logo"></p>
                    <div class="social-icons">
                        <a href="https://x.com/crypto__coq"><img src="https://solanatokens.github.io/politifisolana/x-icon.png" alt="Twitter"></a>
                        <a href="https://telegram.me/solanactoteam"><img src="https://solanatokens.github.io/politifisolana/tg-icon.png" alt="Telegram"></a>
                    </div>
                </div>
            </div>
        </header>

        <p class="note">Note : if you didn't find your favorite coins here please <a href="https://x.com/crypto__coq">contact me on x</a> to add/update it</p>

        <section class="tabs">
            <button class="tab active" onclick="showTab('republican')">Republican
            </button>
            <button class="tab" onclick="showTab('democratic')">Democratic
            </button>
            <button class="tab" onclick="showTab('meme')">Meme
            </button>
        </section>

        <section id="republican" class="countries active">
            <table>
                <thead>
                    <tr>
                        <th>Countries</th>
                        <th>Mcap</th>
                        <th>24h %</th>
                        <th>Liquidity</th>
                        <th>Socials</th>
                        <th>Community Note</th>
                    </tr>
                </thead>
                <tbody id="republican-table">
                    <!-- Tokens will be dynamically inserted here -->
                </tbody>
            </table>
        </section>

        <section id="democratic" class="countries">
            <table>
                <thead>
                    <tr>
                        <th>Countries</th>
                        <th>Mcap</th>
                        <th>24h %</th>
                        <th>Liquidity</th>
                        <th>Socials</th>
                        <th>Community Note</th>
                    </tr>
                </thead>
                <tbody id="democratic-table">
                    <!-- Tokens will be dynamically inserted here -->
                </tbody>
            </table>
        </section>

        <section id="meme" class="countries">
            <table>
                <thead>
                    <tr>
                        <th>Countries</th>
                        <th>Mcap</th>
                        <th>24h %</th>
                        <th>Liquidity</th>
                        <th>Socials</th>
                        <th>Community Note</th>
                    </tr>
                </thead>
                <tbody id="meme-table">
                    <!-- Tokens will be dynamically inserted here -->
                </tbody>
            </table>
        </section>
    </div>

    <script>
        const tokens = {
            republican: [
                { name: 'Trump', contract: '4h8LjZWUfUQVgbEZ29UzTuGXNW6rwrJis78ZU66ekkPV' }
            ],
            democratic: [
                { name: 'Kamala', contract: '2tvQMBiB4aoxsXhgAPWSUpE1Cas5eSU3bNWa6p6Rpump' }
            ],
            meme: [
                { name: 'MemeToken', contract: '8pWBWofJZK8DVS1xvsEobaFKQ3pjiqPwiWwH2TWrccvZ' }
            ]
        };

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('Contract address copied to clipboard');
            });
        }

        function showTab(tab) {
            document.querySelectorAll('.countries').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(tab).classList.add('active');
            document.querySelectorAll('.tab').forEach(button => {
                button.classList.remove('active');
            });
            document.querySelector(`.tab[onclick="showTab('${tab}')"]`).classList.add('active');
        }

        async function fetchTokenData(contract) {
            const url = `https://api.dexscreener.com/latest/dex/tokens/${contract}`;
            try {
                const response = await fetch(url);
                const data = await response.json();
                console.log(data); // Debug output
                const tokenData = data.pairs.find(pair => pair.baseToken.address.toLowerCase() === contract.toLowerCase());
                return {
                    name: tokenData ? tokenData.baseToken.name : 'N/A',
                    symbol: tokenData ? tokenData.baseToken.symbol : 'N/A',
                    logo: tokenData ? tokenData.info.imageUrl : '',
                    marketCap: tokenData ? tokenData.fdv : 'N/A',
                    volume24h: tokenData ? tokenData.volume.h24 : 'N/A',
                    priceChange24h: tokenData ? tokenData.priceChange.h24 : 'N/A',
                    liquidity: tokenData ? tokenData.liquidity.usd : 'N/A',
                    socials: tokenData ? tokenData.info.socials : [],
                    communityNote: tokenData ? 'Community note' : 'N/A'
                };
            } catch (error) {
                console.error('Error fetching token data:', error);
                return {
                    name: 'N/A',
                    symbol: 'N/A',
                    logo: '',
                    marketCap: 'N/A',
                    volume24h: 'N/A',
                    priceChange24h: 'N/A',
                    liquidity: 'N/A',
                    socials: [],
                    communityNote: 'N/A'
                };
            }
        }

        async function displayTokens() {
            const republicanTable = document.getElementById('republican-table');
            const democraticTable = document.getElementById('democratic-table');
            const memeTable = document.getElementById('meme-table');

            for (const token of tokens.republican) {
                const data = await fetchTokenData(token.contract);
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <img src="https://solanatokens.github.io/politifisolana/republican.png" alt="Republican" class="section-icon">
                        <img src="${data.logo}" alt="${data.name} Logo" class="token-logo">
                        <span onclick="copyToClipboard('${token.contract}')" style="cursor:pointer;">
                            ${data.name}<br><span>${data.symbol}</span>
                        </span>
                    </td>
                    <td>${data.marketCap}</td>
                    <td class="${data.priceChange24h >= 0 ? 'positive' : 'negative'}">${data.priceChange24h}%</td>
                    <td>${data.liquidity}</td>
                    <td class="social-icons">
                        ${data.socials.map(social => {
                            if (social.type === 'twitter') {
                                return `<a href="${social.url}" target="_blank"><img src="https://solanatokens.github.io/politifisolana/x-icon.png" alt="Twitter"></a>`;
                            } else if (social.type === 'telegram') {
                                return `<a href="${social.url}" target="_blank"><img src="https://solanatokens.github.io/politifisolana/tg-icon.png" alt="Telegram"></a>`;
                            } else {
                                return `<a href="${social.url}" target="_blank"><img src="path/to/${social.type}-icon.png" alt="${social.type}"></a>`;
                            }
                        }).join(' ')}
                        <a href="${data.url}" target="_blank"><img src="https://solanatokens.github.io/politifisolana/dexscreener-e69e013b.png" alt="DexScreener"></a>
                    </td>
                    <td>${data.communityNote}</td>
                `;
                republicanTable.appendChild(row);
            }

            for (const token of tokens.democratic) {
                const data = await fetchTokenData(token.contract);
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <img src="https://solanatokens.github.io/politifisolana/donkey.jpg" alt="Democratic" class="section-icon">
                        <img src="${data.logo}" alt="${data.name} Logo" class="token-logo">
                        <span onclick="copyToClipboard('${token.contract}')" style="cursor:pointer;">
                            ${data.name}<br><span>${data.symbol}</span>
                        </span>
                    </td>
                    <td>${data.marketCap}</td>
                    <td class="${data.priceChange24h >= 0 ? 'positive' : 'negative'}">${data.priceChange24h}%</td>
                    <td>${data.liquidity}</td>
                    <td class="social-icons">
                        ${data.socials.map(social => {
                            if (social.type === 'twitter') {
                                return `<a href="${social.url}" target="_blank"><img src="https://solanatokens.github.io/politifisolana/x-icon.png" alt="Twitter"></a>`;
                            } else if (social.type === 'telegram') {
                                return `<a href="${social.url}" target="_blank"><img src="https://solanatokens.github.io/politifisolana/tg-icon.png" alt="Telegram"></a>`;
                            } else {
                                return `<a href="${social.url}" target="_blank"><img src="path/to/${social.type}-icon.png" alt="${social.type}"></a>`;
                            }
                        }).join(' ')}
                        <a href="${data.url}" target="_blank"><img src="https://solanatokens.github.io/politifisolana/dexscreener-e69e013b.png" alt="DexScreener"></a>
                    </td>
                    <td>${data.communityNote}</td>
                `;
                democraticTable.appendChild(row);
            }

            for (const token of tokens.meme) {
                const data = await fetchTokenData(token.contract);
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <img src="https://solanatokens.github.io/politifisolana/meme.png" alt="Meme" class="section-icon">
                        <img src="${data.logo}" alt="${data.name} Logo" class="token-logo">
                        <span onclick="copyToClipboard('${token.contract}')" style="cursor:pointer;">
                            ${data.name}<br><span>${data.symbol}</span>
                        </span>
                    </td>
                    <td>${data.marketCap}</td>
                    <td class="${data.priceChange24h >= 0 ? 'positive' : 'negative'}">${data.priceChange24h}%</td>
                    <td>${data.liquidity}</td>
                    <td class="social-icons">
                        ${data.socials.map(social => {
                            if (social.type === 'twitter') {
                                return `<a href="${social.url}" target="_blank"><img src="https://solanatokens.github.io/politifisolana/x-icon.png" alt="Twitter"></a>`;
                            } else if (social.type === 'telegram') {
                                return `<a href="${social.url}" target="_blank"><img src="https://solanatokens.github.io/politifisolana/tg-icon.png" alt="Telegram"></a>`;
                            } else {
                                return `<a href="${social.url}" target="_blank"><img src="path/to/${social.type}-icon.png" alt="${social.type}"></a>`;
                            }
                        }).join(' ')}
                        <a href="${data.url}" target="_blank"><img src="https://solanatokens.github.io/politifisolana/dexscreener-e69e013b.png" alt="DexScreener"></a>
                    </td>
                    <td>${data.communityNote}</td>
                `;
                memeTable.appendChild(row);
            }
        }

        displayTokens();
    </script>
</body>
</html>
